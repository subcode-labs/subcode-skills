{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"$id": "https://raw.githubusercontent.com/subcode-labs/subcode-skills/main/schemas/config.schema.json",
	"title": "Subcode Configuration",
	"description": "Configuration file for subcode skills",
	"type": "object",
	"properties": {
		"$schema": {
			"type": "string",
			"description": "JSON Schema reference"
		},
		"version": {
			"type": "string",
			"description": "Configuration schema version",
			"pattern": "^\\d+\\.\\d+\\.\\d+$",
			"examples": ["1.0.0"]
		},
		"initialized": {
			"type": "string",
			"description": "ISO 8601 timestamp when subcode was initialized",
			"format": "date-time"
		},
		"worktrees": {
			"type": "object",
			"description": "Configuration for the subcode-worktrees skill",
			"properties": {
				"defaultBaseBranch": {
					"type": "string",
					"description": "Default branch to create new worktrees from",
					"default": "main",
					"examples": ["main", "master", "develop"]
				},
				"autoInstallDeps": {
					"type": "boolean",
					"description": "Automatically run package manager install in new worktrees",
					"default": true
				},
				"copyEnvFiles": {
					"type": "boolean",
					"description": "Copy env files to new worktrees (must be explicitly enabled)",
					"default": false
				},
				"envFilePaths": {
					"type": "array",
					"description": "Paths to env files to copy (relative to repo root)",
					"items": {
						"type": "string"
					},
					"examples": [
						[".env.local", ".env.development.local", "apps/web/.env.local"]
					]
				},
				"packageManager": {
					"type": "string",
					"description": "Package manager to use for installing dependencies",
					"enum": ["auto", "bun", "npm", "yarn", "pnpm"],
					"default": "auto"
				}
			},
			"additionalProperties": false
		},
		"prLoop": {
			"type": "object",
			"description": "Configuration for the subcode-pr-loop skill",
			"properties": {
				"issueTracker": {
					"type": "string",
					"description": "Where to create follow-up issues",
					"enum": ["github", "linear"],
					"default": "github"
				},
				"linearTeamId": {
					"type": "string",
					"description": "Linear team ID for issue creation (required if issueTracker is 'linear')"
				},
				"linearProjectId": {
					"type": "string",
					"description": "Optional Linear project ID to assign issues to"
				},
				"maxIterations": {
					"type": "number",
					"description": "Maximum improvement iterations before stopping",
					"default": 5
				},
				"ciWaitSeconds": {
					"type": "number",
					"description": "Initial wait time for CI after push (seconds)",
					"default": 300
				},
				"ciRetrySeconds": {
					"type": "number",
					"description": "Additional wait if CI not complete (seconds)",
					"default": 120
				}
			},
			"additionalProperties": false
		}
	},
	"required": ["version"],
	"additionalProperties": true
}
